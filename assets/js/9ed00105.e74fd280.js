"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[873],{8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var i=r(6540);const l={},t=i.createContext(l);function s(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(t.Provider,{value:n},e.children)}},8633:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"configuration","title":"\ud83e\uddf1 Configuration","description":"The Laravel Migration Linter ships with a configurable file that defines which rules are active and how severe their findings should be.","source":"@site/docs/configuration.md","sourceDirName":".","slug":"/configuration","permalink":"/sufyan-laravel-migration-lint-package/docs/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/muhammad-sufyan5/sufyan-laravel-migration-lint-package/tree/main/docs-site/docs/configuration.md","tags":[],"version":"current","lastUpdatedBy":"Muhammad Sufyan","lastUpdatedAt":1766575084000,"sidebarPosition":4,"frontMatter":{"id":"configuration","title":"\ud83e\uddf1 Configuration","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"\ud83e\udde9 Usage","permalink":"/sufyan-laravel-migration-lint-package/docs/usage"},"next":{"title":"\ud83d\udccf Available Linter Rules","permalink":"/sufyan-laravel-migration-lint-package/docs/rules"}}');var l=r(4848),t=r(8453);const s={id:"configuration",title:"\ud83e\uddf1 Configuration",sidebar_position:4},a=void 0,o={},c=[{value:"\u2699\ufe0f Publishing the Config",id:"\ufe0f-publishing-the-config",level:2},{value:"\ud83d\udcc4 Default Config File",id:"-default-config-file",level:3},{value:"\ud83e\udde9 Severity Levels",id:"-severity-levels",level:3},{value:"\ud83e\udde0 Notes",id:"-notes",level:3},{value:"\ud83d\udd27 Rule-Specific Options",id:"-rule-specific-options",level:3},{value:"MissingIndexOnForeignKey",id:"missingindexonforeignkey",level:4},{value:"DropColumnWithoutBackup",id:"dropcolumnwithoutbackup",level:4},{value:"AddUniqueConstraintOnNonEmptyColumn",id:"adduniqueconstraintonnonemptycolumn",level:4},{value:"FloatColumnForMoney",id:"floatcolumnformoney",level:4},{value:"SoftDeletesOnProduction",id:"softdeletesonproduction",level:4},{value:"RenamingColumnWithoutIndex",id:"renamingcolumnwithoutindex",level:4},{value:"ChangeColumnTypeOnLargeTable",id:"changecolumntypeonlargetable",level:4}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.strong,{children:"Laravel Migration Linter"})," ships with a configurable file that defines which rules are active and how severe their findings should be.",(0,l.jsx)(n.br,{}),"\n","You can customize this file to match your team's migration safety standards."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-publishing-the-config",children:"\u2699\ufe0f Publishing the Config"}),"\n",(0,l.jsx)(n.p,{children:"If you haven\u2019t already, publish the configuration file to your app:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'php artisan vendor:publish --tag="migration-linter-config"\n'})}),"\n",(0,l.jsx)(n.p,{children:"This creates:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-arduino",children:"config/migration-linter.php\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"-default-config-file",children:"\ud83d\udcc4 Default Config File"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"return [\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Enable / Disable Linter\r\n    |--------------------------------------------------------------------------\r\n    */\r\n    'enabled' => env('MIGRATION_LINTER_ENABLED', true),\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Environments\r\n    |--------------------------------------------------------------------------\r\n    */\r\n    'environments' => ['local', 'staging', 'testing'],\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Severity Threshold\r\n    |--------------------------------------------------------------------------\r\n    |\r\n    | Minimum severity that should trigger a non-zero exit code in CI.\r\n    | Options: info | warning | error\r\n    |\r\n    */\r\n    'severity_threshold' => 'warning',\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Known Large Tables\r\n    |--------------------------------------------------------------------------\r\n    |\r\n    | Large tables are more likely to cause locks or downtime.\r\n    |\r\n    */\r\n    'large_table_names' => ['users', 'orders', 'invoices'],\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Check All Tables\r\n    |--------------------------------------------------------------------------\r\n    |\r\n    | If true, the linter will check every table, not just those listed in\r\n    | \"large_table_names\". If false, only large tables will be checked.\r\n    |\r\n    */\r\n    'check_all_tables' => false,\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Excluded Paths\r\n    |--------------------------------------------------------------------------\r\n    |\r\n    | Paths inside `database/migrations` that should be ignored.\r\n    |\r\n    */\r\n    'exclude_paths' => [],\r\n\r\n    /*\r\n    |--------------------------------------------------------------------------\r\n    | Rule Toggles\r\n    |--------------------------------------------------------------------------\r\n    */\r\n    'rules' => [\r\n        'AddNonNullableColumnWithoutDefault' => [\r\n            'enabled' => true,\r\n            'severity' => 'warning',\r\n        ],\r\n        'MissingIndexOnForeignKey' => [\r\n            'enabled' => true,\r\n            'severity' => 'warning',\r\n            'check_foreign_id_without_constrained' => true,\r\n            'check_morphs_without_index' => true,\r\n            'check_composite_foreign' => true,\r\n        ],\r\n        'DropColumnWithoutBackup' => [\r\n            'enabled'  => true,\r\n            'severity' => 'warning',\r\n            'allow_safe_comment' => true,\r\n        ],\r\n        'AddUniqueConstraintOnNonEmptyColumn' => [\r\n            'enabled'  => true,\r\n            'severity' => 'warning',\r\n            'check_composite' => true,\r\n        ],\r\n        'FloatColumnForMoney' => [\r\n            'enabled'  => true,\r\n            'severity' => 'warning',\r\n            'check_double' => true,\r\n            'check_real'   => true,\r\n        ],\r\n        'SoftDeletesOnProduction' => [\r\n            'enabled'  => true,\r\n            'severity' => 'warning',\r\n            'check_all_tables' => false, // Check only large_table_names\r\n        ],\r\n        'RenamingColumnWithoutIndex' => [\r\n            'enabled'  => true,\r\n            'severity' => 'warning',\r\n            'check_large_tables_only' => true, // Check only large tables\r\n        ],\r\n        'ChangeColumnTypeOnLargeTable' => [\r\n            'enabled'  => true,\r\n            'severity' => 'error', // High severity - can cause significant downtime\r\n            'check_large_tables_only' => true, // Check only large tables\r\n        ],\r\n    ],\r\n];\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"-severity-levels",children:"\ud83e\udde9 Severity Levels"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Level"}),(0,l.jsx)(n.th,{children:"Meaning"}),(0,l.jsx)(n.th,{children:"Exit Code"}),(0,l.jsx)(n.th,{children:"Recommended Usage"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"info"})}),(0,l.jsx)(n.td,{children:"Advisory only; does not affect CI"}),(0,l.jsx)(n.td,{children:"0"}),(0,l.jsx)(n.td,{children:"Local hints or code-style warnings"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"warning"})}),(0,l.jsx)(n.td,{children:"Possible performance or safety issue"}),(0,l.jsx)(n.td,{children:"0"}),(0,l.jsx)(n.td,{children:"Default level for most rules"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"error"})}),(0,l.jsx)(n.td,{children:"Migration-breaking or data-loss risk"}),(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"Use in CI/CD pipelines to block risky merges"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"-notes",children:"\ud83e\udde0 Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["You can disable a rule entirely by setting ",(0,l.jsx)(n.code,{children:"'enabled' => false"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["To treat warnings as failures in CI, change ",(0,l.jsx)(n.code,{children:"severity_threshold"})," to ",(0,l.jsx)(n.code,{children:"'error'"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Custom rules defined in ",(0,l.jsx)(n.code,{children:"App\\MigrationRules"})," or any namespaced class are automatically discovered."]}),"\n",(0,l.jsxs)(n.li,{children:["Each rule now includes ",(0,l.jsx)(n.strong,{children:"actionable suggestions"})," in its output."]}),"\n",(0,l.jsxs)(n.li,{children:["Large table configuration (",(0,l.jsx)(n.code,{children:"large_table_names"}),") is shared across multiple rules (SoftDeletesOnProduction, RenamingColumnWithoutIndex)."]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"'check_all_tables' => true"})," to check all tables regardless of the ",(0,l.jsx)(n.code,{children:"large_table_names"})," list."]}),"\n",(0,l.jsxs)(n.li,{children:["Safe comment bypass: Add ",(0,l.jsx)(n.code,{children:"// safe drop"}),", ",(0,l.jsx)(n.code,{children:"// safe rename"}),", etc., to bypass specific warnings."]}),"\n",(0,l.jsxs)(n.li,{children:["See ",(0,l.jsx)(n.a,{href:"/sufyan-laravel-migration-lint-package/docs/rules",children:"\ud83d\udccf Available Rules"})," for detailed documentation on each rule."]}),"\n",(0,l.jsxs)(n.li,{children:["See ",(0,l.jsx)(n.a,{href:"/sufyan-laravel-migration-lint-package/docs/writing-custom-rules",children:"\ud83e\udde0 Writing Custom Rules"})," for creating your own rules."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"-rule-specific-options",children:"\ud83d\udd27 Rule-Specific Options"}),"\n",(0,l.jsx)(n.h4,{id:"missingindexonforeignkey",children:"MissingIndexOnForeignKey"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_foreign_id_without_constrained' => true,  // Check foreignId() without ->constrained()\r\n'check_morphs_without_index' => true,            // Check morphs() without ->index()\r\n'check_composite_foreign' => true,               // Check composite foreign keys\n"})}),"\n",(0,l.jsx)(n.h4,{id:"dropcolumnwithoutbackup",children:"DropColumnWithoutBackup"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'allow_safe_comment' => true,  // Allow '// safe drop' to bypass warning\n"})}),"\n",(0,l.jsx)(n.h4,{id:"adduniqueconstraintonnonemptycolumn",children:"AddUniqueConstraintOnNonEmptyColumn"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_composite' => true,  // Check composite unique constraints\n"})}),"\n",(0,l.jsx)(n.h4,{id:"floatcolumnformoney",children:"FloatColumnForMoney"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_double' => true,  // Check double() columns\r\n'check_real' => true,    // Check real() columns\n"})}),"\n",(0,l.jsx)(n.h4,{id:"softdeletesonproduction",children:"SoftDeletesOnProduction"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_all_tables' => false,  // Only check large_table_names (default)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"renamingcolumnwithoutindex",children:"RenamingColumnWithoutIndex"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_large_tables_only' => true,  // Only check large_table_names (default)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"changecolumntypeonlargetable",children:"ChangeColumnTypeOnLargeTable"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"'check_large_tables_only' => true,  // Only check large_table_names (default)\r\n'severity' => 'error',              // High severity due to potential for significant downtime\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u2705 Pro Tip: Commit your config/migration-linter.php file to version control so your whole team shares the same linting standards."}),"\n",(0,l.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);