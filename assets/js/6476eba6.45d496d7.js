"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[722],{6187:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"usage","title":"\ud83e\udde9 Usage","description":"After installing the package, run the linter on all migrations:","source":"@site/docs/usage.md","sourceDirName":".","slug":"/usage","permalink":"/sufyan-laravel-migration-lint-package/docs/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/muhammad-sufyan5/sufyan-laravel-migration-lint-package/tree/main/docs-site/docs/usage.md","tags":[],"version":"current","lastUpdatedBy":"Muhammad Sufyan","lastUpdatedAt":1761646513000,"sidebarPosition":3,"frontMatter":{"id":"usage","title":"\ud83e\udde9 Usage","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\u2699\ufe0f Installation","permalink":"/sufyan-laravel-migration-lint-package/docs/installation"},"next":{"title":"\ud83e\uddf1 Configuration","permalink":"/sufyan-laravel-migration-lint-package/docs/configuration"}}');var r=s(4848),t=s(8453);const a={id:"usage",title:"\ud83e\udde9 Usage",sidebar_position:3},l=void 0,o={},d=[{value:"\u2699\ufe0f Command Options",id:"\ufe0f-command-options",level:2},{value:"\ud83d\udcbb Example Commands",id:"-example-commands",level:2},{value:"\ud83d\udd0d Lint all migrations",id:"-lint-all-migrations",level:3},{value:"\ud83e\uddfe Generate a new baseline file (ignore current issues)",id:"-generate-a-new-baseline-file-ignore-current-issues",level:3},{value:"\ud83d\udcc2 Lint a specific path",id:"-lint-a-specific-path",level:3},{value:"\ud83e\udde0 Export report as JSON (for CI pipelines)",id:"-export-report-as-json-for-ci-pipelines",level:3},{value:"\ud83d\uddc2 Use a custom baseline file",id:"-use-a-custom-baseline-file",level:3},{value:"\ud83d\uddc2 List all rules with their enabled statuses",id:"-list-all-rules-with-their-enabled-statuses",level:3},{value:"\ud83d\udda5 Compact mode for smaller terminals",id:"-compact-mode-for-smaller-terminals",level:3},{value:"\ud83d\udea6Exit Codes",id:"exit-codes",level:2},{value:"\ud83d\udca1 Pro Tips",id:"-pro-tips",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"After installing the package, run the linter on all migrations:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This scans your ",(0,r.jsx)(n.code,{children:"database/migrations"})," folder for risky schema operations and reports potential issues."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-command-options",children:"\u2699\ufe0f Command Options"}),"\n",(0,r.jsx)(n.p,{children:"You can customize the linting behavior using the following flags and options:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option / Flag"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--generate-baseline"})}),(0,r.jsxs)(n.td,{children:["Create a baseline JSON file (",(0,r.jsx)(n.code,{children:"migration-linter-baseline.json"}),") that records current issues, allowing you to ignore them in future runs (useful when introducing the linter to legacy projects)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--path="})}),(0,r.jsxs)(n.td,{children:["Lint a specific file or directory instead of the default ",(0,r.jsx)(n.code,{children:"database/migrations"})," folder."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--json"})}),(0,r.jsx)(n.td,{children:"Output results in structured JSON format (ideal for CI/CD or automation)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--baseline="})}),(0,r.jsx)(n.td,{children:"Provide a custom path to a baseline file (overrides the default baseline file)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--compact"})}),(0,r.jsx)(n.td,{children:"Display a shorter, condensed table layout for smaller terminals or narrow CI logs."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--rules"})}),(0,r.jsx)(n.td,{children:"View all rules and their enabled statuses."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-example-commands",children:"\ud83d\udcbb Example Commands"}),"\n",(0,r.jsx)(n.h3,{id:"-lint-all-migrations",children:"\ud83d\udd0d Lint all migrations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-generate-a-new-baseline-file-ignore-current-issues",children:"\ud83e\uddfe Generate a new baseline file (ignore current issues)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --generate-baseline\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This creates ",(0,r.jsx)(n.code,{children:"migration-linter-baseline.json"})," in your project root."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"-lint-a-specific-path",children:"\ud83d\udcc2 Lint a specific path"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --path=database/migrations/2025_10_20_123456_create_users_table.php\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"-export-report-as-json-for-ci-pipelines",children:"\ud83e\udde0 Export report as JSON (for CI pipelines)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --json > storage/lint-report.json\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example output (simplified):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'[\r\n  {\r\n    "ruleId": "DropColumnWithoutBackup",\r\n    "severity": "warning",\r\n    "message": "Dropping column \'age\' from table \'users\' may result in data loss.",\r\n    "file": "2025_10_20_123456_update_users_table.php"\r\n  }\r\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"-use-a-custom-baseline-file",children:"\ud83d\uddc2 Use a custom baseline file"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --baseline=storage/custom-baseline.json\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"-list-all-rules-with-their-enabled-statuses",children:"\ud83d\uddc2 List all rules with their enabled statuses"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --rules\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\ud83d\udccb Available Migration Linter Rules\r\n\r\n+--------------------------------------------+----------+---------------------------------------------------------------+\r\n| Rule ID                                   | Enabled  | Description                                                   |\r\n+--------------------------------------------+----------+---------------------------------------------------------------+\r\n| AddNonNullableColumnWithoutDefault        | Yes   | Warns when adding a NOT NULL column without a default value.  |\r\n| MissingIndexOnForeignKey                  | No    | Detects missing indexes on foreign key columns.               |\r\n| DropColumnWithoutBackup                   | Yes   | Warns when columns are dropped without backup.                |\r\n| AddUniqueConstraintOnNonEmptyColumn       | No    | Warns when adding unique constraints on existing data.        |\r\n| FloatColumnForMoney                       | Yes   | Warns when float() used for monetary values.                  |\r\n+--------------------------------------------+----------+---------------------------------------------------------------+\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"-compact-mode-for-smaller-terminals",children:"\ud83d\udda5 Compact mode for smaller terminals"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"php artisan migrate:lint --compact\n"})}),"\n",(0,r.jsx)(n.p,{children:"This outputs a shorter version of the table without verbose file paths."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"exit-codes",children:"\ud83d\udea6Exit Codes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Exit Code"}),(0,r.jsx)(n.th,{children:"Meaning"}),(0,r.jsx)(n.th,{children:"When it occurs"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})}),(0,r.jsx)(n.td,{children:"\u2705 No critical issues (or only warnings below threshold)"}),(0,r.jsx)(n.td,{children:"Safe to proceed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})}),(0,r.jsx)(n.td,{children:"\u274c One or more rules exceeded the severity threshold"}),(0,r.jsx)(n.td,{children:"CI/CD should fail"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"The threshold is controlled by severity_threshold in your configuration file.\r\nFor example, setting 'severity_threshold' => 'error' will fail the command only when error-level issues are found."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-pro-tips",children:"\ud83d\udca1 Pro Tips"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use --generate-baseline once when introducing the linter to a legacy codebase, then commit the baseline file."}),"\n",(0,r.jsxs)(n.li,{children:["Regularly re-run php artisan migrate",":lint"," in your CI/CD to catch unsafe schema changes early."]}),"\n",(0,r.jsx)(n.li,{children:"Combine with your existing testing jobs to prevent migration issues from reaching production."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u2705 That\u2019s it!\r\nYou\u2019re ready to lint, baseline, and enforce migration safety across all environments."}),"\n",(0,r.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);